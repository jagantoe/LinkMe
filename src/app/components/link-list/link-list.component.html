<div class="w-full">
    @if (currentProject()) {
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 sm:gap-0 mb-6">
            <h2 class="text-xl sm:text-2xl font-medium">{{ searchTerm() ? 'Search Results' : 'All Links' }}</h2>
            <button
                class="px-4 py-2 bg-blue-400 text-white border-none rounded text-sm cursor-pointer transition-colors hover:bg-blue-500 w-full sm:w-auto"
                (click)="toggleAddLink()">
                {{ isAddingLink() ? 'Cancel' : 'Add Link' }}
            </button>
        </div>

        @if (displayLinks().length === 0 && !isAddingLink()) {
            <div class="text-center py-8 sm:py-12 px-4 bg-gray-50 rounded-lg">
                @if (searchTerm()) {
                    <p class="mb-4 sm:mb-6 text-gray-600 text-base sm:text-lg">No links match your search
                        "{{ searchTerm() }}"</p>
                    <button
                        class="px-4 py-2 bg-gray-200 border-none rounded text-gray-700 text-sm cursor-pointer hover:bg-gray-300"
                        (click)="clearSearch()">Clear Search</button>
                } @else {
                    <p class="mb-4 sm:mb-6 text-gray-600 text-base sm:text-lg">No links in this project yet. Add your
                        first link!</p>
                    <button
                        class="px-4 py-2 bg-blue-400 text-white border-none rounded text-sm cursor-pointer hover:bg-blue-500"
                        (click)="toggleAddLink()">Add Link</button>
                }
            </div>
        } @else {
            <!-- Links Grid with Add Link Form at the beginning -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
                <!-- Add Link Form (first position) -->
                @if (isAddingLink()) {
                    <app-link-form formTitle="Add New Link" (formSubmit)="addNewLink($event)"
                        (formCancel)="toggleAddLink()" />
                }

                <!-- Display Links -->
                @for (item of displayLinks(); track item.link.id) {
                    <app-link-item [link]="item.link" [score]="item.score" [matchType]="item.matchType"
                        [showMatchType]="!!searchTerm()" />
                }
            </div>
        }
    } @else {
        <div class="text-center py-8 sm:py-12 px-4 bg-gray-50 rounded-lg">
            <p class="text-gray-600 text-base sm:text-lg">Please create or select a project to start adding links.</p>
        </div>
    }
</div>
